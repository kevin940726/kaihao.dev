---
title: 'Write your commit messages in the right way'
date: '2017-03-05'
---

è¦æ€éº¼å¯« `commit messages` ä¸€ç›´æ˜¯çˆ­è«–ä¸ä¼‘çš„è­°é¡Œï¼Œæ¯å€‹ team æœ‰è‡ªå·±åå¥½çš„æ–¹å¼ï¼Œä»¥åŠæ‰€è¬‚çš„ _best practices_ï¼Œåƒæ˜¯çŸ¥åçš„ [AngularJS commit convensions](https://gist.github.com/stephenparish/9941e89d80e2bc58a153)ï¼Œåœ¨é€™è£¡æˆ‘ä¸æƒ³è¨è«–å“ªå€‹æ¨™æº–æ‰æ˜¯æœ€å¥½çš„ï¼Œå› ç‚ºå¯¦éš›ä¸Šé‚„æ˜¯è¦æ ¹æ“šè‡ªå·±çš„åœ˜éšŠå»é¸æ“‡é©åˆçš„æ¨™æº–ï¼Œåªè¦å…§éƒ¨çµ±ä¸€äº†ä¸”æ¯å€‹äººéƒ½èƒ½éµå®ˆé‚£å€‹è¦ç¯„çš„è©±ï¼Œæˆ‘è¦ºå¾—æ²’æœ‰å¿…è¦ç‚ºäº†é”åˆ°å®Œç¾è€Œæ‹–æ…¢æˆ–é™åˆ¶äº†åœ˜éšŠçš„æ­¥ä¼ã€‚

èªªæ˜¯é€™éº¼èªª â‹¯â‹¯ ä½†ä½ æœƒæƒ³çœ‹åˆ°é€™æ¨£çš„ `commit log` å—ï¼Ÿ

```bash
[5f25bbe] hide loading-word too
[3c80512] finally
[9578933] trying important
[1f65c26] hide loading wrapper
```

æ²’éŒ¯ï¼Œä»¥å‰æˆ‘çš„ `commit` çœŸçš„æ˜¯é€™æ¨£å¯«çµ¦è‡ªå·±çœ‹çš„ï¼Œä½†å…¶å¯¦å¯¦éš›ä¸Šç¾åœ¨ä¾†çœ‹é€£æˆ‘è‡ªå·±éƒ½çœ‹ä¸æ‡‚ï¼Œé€™æ¨£çš„ `commit messages` æ²’æœ‰ä»»ä½•æ„ç¾©å°±åªæ˜¯ç‚ºäº† `commit` è€Œ `commit` è€Œå·²ï¼Œå°æ–¼å€‹äººçš„å°å°ˆæ¡ˆçš„è©±ä¹Ÿè¨±é‚„ä¸æœƒæœ‰å½±éŸ¿ï¼Œä½†è‹¥æ˜¯åœ¨åœ˜éšŠä¸­çš„è©±å¯æ˜¯æœƒè®“ Code Review å’Œ Changelog æœ‰å¾ˆå¤§çš„å›°æ“¾ã€‚

æ‰€ä»¥ç¸±ä½¿æˆ‘ä¸¦ä¸å–œæ­¡ over engineering çš„ `commit` è¨­è¨ˆï¼Œä½†è£¡é¢æœ‰è¨±å¤šå¯¦ç”¨çš„å¤§é‡é»æ˜¯æˆ‘èªç‚ºæ‡‰è©²è¦éµå®ˆçš„ã€‚

### Use English whenever possible

ç›¡å¯èƒ½åœ°å¯«è‹±æ–‡ã€‚

ã€Œå¯æ˜¯æˆ‘çš„åœ˜éšŠéƒ½æ˜¯å°ç£äººå‘€ï¼Ÿç‚ºä»€éº¼ `commit messages` ä¸èƒ½ç”¨è‡ªå·±çš„æ¯èªå‘¢ï¼Ÿã€ä½ å¯èƒ½æœƒé€™éº¼æƒ³ï¼Œä½†æ˜¯ç•¶ä½ å€‘çš„å°ˆæ¡ˆ open source ä»¥å¾Œï¼Œä¾†è‡ªä¸–ç•Œå„åœ°çš„äººè¦æ€éº¼è®€æ‡‚ä½ å€‘çš„æ¯èªå‘¢ï¼Ÿç¾å¯¦ä¸Šä¾†èªªè‹±æ–‡ç¢ºå¯¦æ˜¯åœ¨å·¥ç¨‹å¸«ä¹‹é–“æœ€å»£æ³›ä½¿ç”¨çš„èªè¨€ï¼Œç”¨è‹±æ–‡ä¾†å¯« `commit` å¯ä»¥ç¢ºä¿æœ‰æœ€å¤šçš„äººå¯ä»¥çœ‹å¾—æ‡‚ï¼Œå°±ç®—ä½ å€‘çš„å°ˆæ¡ˆæ˜¯å…¬å¸çš„ç”¢å“ä¸¦æ²’æœ‰æ‰“ç®—è¦é–‹æºï¼Œä½†èª°ä¹Ÿä¸èƒ½ä¿è­‰å¾€å¾Œçš„æ—¥å­å“ªä¸€å¤©çªç„¶å°±æ±ºå®šè¦é–‹æºäº†ï¼Œç•¢ç«Ÿé€£ [Apollo 11](https://github.com/chrislgarry/Apollo-11) éƒ½é–‹æºäº†ã€‚

### Use the imperative mood in the subject line

æ¨™é¡Œä½¿ç”¨ç¥ˆä½¿èªå¥ã€‚

ç°¡å–®ä¾†èªªå°±æ˜¯ä»¥ç¾åœ¨å¼å‹•è©ç‚ºé–‹é ­çš„å¥å­ï¼Œåœ¨é€™è£¡ä¸æ¢è¨æ–‡æ³•ä¹‹é¡çš„å•é¡Œï¼Œå–®ç´”å°±çµæ§‹ä¾†çœ‹ç¥ˆä½¿å¥çœ‹èµ·ä¾†æ›´ç›´æ¥æ›´ç°¡å–®ï¼Œç›´æ¥ä»£è¡¨äº†é€™å€‹ `commit` **å¦‚æœå¥—ç”¨å¾Œæœƒåšä»€éº¼**ï¼Œè€Œä¸æ˜¯åšäº†äº›ä»€éº¼ï¼Œç”¨ä¸€å¥è‹±æ–‡ä¾†è¡¨é”çš„è©±æœƒæ˜¯åƒé€™æ¨£ã€‚

> If applied, this commit will [_**commit subject**_]

å°‡ `commit subject` ä»£æ›æˆä½ çš„ `commit` æ¨™é¡Œå¾Œå¦‚æœèƒ½å½¢æˆä¸€å€‹æ­£ç¢ºçš„å¥å­çš„è©±å°±æ˜¯å¥½çš„æ¨™é¡Œã€‚

å¦å¤–åœ¨æ¨™é¡Œçš„æœ€å¾Œï¼Œä¹Ÿè¦é¿å…ä½¿ç”¨å¥è™Ÿä¾†åšçµå°¾ï¼Œé€™åœ¨æ¨™é¡Œçš„ä½¿ç”¨ä¸Šé¡¯å¾—å¤šé¤˜ï¼Œä½†è‹¥æ˜¯ `commit` çš„å…§æ–‡çš„è©±å‰‡å¯«ä¸€èˆ¬çš„è‹±æ–‡èªæ³•å³å¯ï¼Œä¸éœ€è¦ä½¿ç”¨ç¥ˆä½¿å¥ä¹Ÿä¸éœ€è¦çœç•¥å¥è™Ÿã€‚

### Use a list of types to categorize the commit

å°‡ `commit` æ­¸é¡æ–¼ä¸€å€‹ç¨®é¡æ¸…å–®ã€‚

æ¯å€‹ `commit` éƒ½æœƒæœ‰ä¸€å€‹ä¸»è¦çš„ç›®æ¨™ï¼Œè€Œé‚£å€‹ç›®æ¨™å¤§è‡´å¯ä»¥æ­¸é¡åœ¨ä¸€å€‹ç¨®é¡æ¸…å–®ä¸­ï¼Œä¸€å€‹æ¸…å–®çš„ä¾‹å­å¯ä»¥æ˜¯ï¼š

- `Feat`: A new feature
- `Fix`: A bug fix
- `Docs`: Documentation only changes
- `Style`: Changes that do not affect the meaning of the code
- `Refactor`: A code change that neither fixes a bug nor adds a feature
- `Perf`: A code change that improves performance
- `Test`: Adding missing tests or correcting existing tests

æ¸…å–®çš„é¸æ“‡å¯ä»¥ç›´æ¥ä½¿ç”¨ç¤¾ç¾¤ä¸Šç¾æœ‰çš„æ¸…å–®ï¼Œä¹Ÿå¯ä»¥è‡ªå·±é‡å°éœ€æ±‚å»åšæ”¹è®Šï¼Œå¦‚æ­¤ä¸€ä¾†æ•´å€‹åœ˜éšŠå°±æœ‰çµ±ä¸€çš„ `commit` æ­¸é¡ï¼Œåœ¨ log ä¸Šå°±å¯ä»¥å¾ˆæ¸…æ¥šçœ‹å‡ºæ¯å€‹ `commit` çš„ç¨®é¡ï¼Œåœ¨æ—¥å¾Œç”¢ç”Ÿ changelog æ™‚ä¹Ÿå¾ˆæ–¹ä¾¿ã€‚

æ‰¾å‡º `commit` çš„ `type` ä»¥å¾Œï¼Œå°‡å®ƒæ”¾åœ¨ `commit` æ¨™é¡Œçš„å‰é¢ï¼Œåƒæ˜¯ï¼š

> refactor: format and lint code

æ ¼å¼å¯ä»¥è‡ªå·±æ±ºå®šï¼Œå†’è™Ÿåªæ˜¯ä¸€èˆ¬çš„è¡¨ç¾æ–¹å¼ï¼Œå¾Œé¢å°±æ¥åŸæœ¬ subject çš„ç¥ˆä½¿å¥ã€‚

## Commitizen

èº«ç‚ºé–‹ç™¼è€…ï¼Œç•¶ç„¶æ˜¯æ‰€æœ‰æ±è¥¿éƒ½å¯ä»¥è‡ªå‹•åŒ–çš„è©±è¶Šå¥½ï¼Œåˆæˆ–è€…åœ¨ä¸åŒå°ˆæ¡ˆä¸­è¦ä½¿ç”¨ä¸åŒçš„ `commit` è¦å‰‡ï¼Œé€™æ™‚å°±æœƒéœ€è¦ä¸€äº›å·¥å…·ä¾†å¹«å¿™äº†ã€‚[Commitizen](https://github.com/commitizen/cz-cli) æ˜¯å…¶ä¸­ä¸€å€‹ç›¸ç•¶å—æ­¡è¿çš„å·¥å…·ï¼Œå°¤å…¶å’Œ Node.js çš„å°ˆæ¡ˆç›¸å®¹æ€§å¾ˆé«˜ã€‚

### Getting Started

é¦–å…ˆå®‰è£ `Commitizen`ï¼ˆæˆ–æ˜¯ä½¿ç”¨ npm å®‰è£ï¼Œä»¥ä¸‹çš†ä½¿ç”¨ yarn åšç¤ºç¯„ï¼‰ã€‚

```sh
$ yarn global add commitizen
# npm install -g commitizen
```

ä¹‹å¾Œå®‰è£å…¶ä¸­ä¸€å€‹ `adapter`ï¼Œå¯ä»¥æŠŠå®ƒç•¶ä½œä¸€ç¨®é è¨­çš„è¦ç¯„ï¼Œä½ å¯ä»¥é¸æ“‡ç›´æ¥ä½¿ç”¨ç¾æœ‰çš„æˆ–æ˜¯è‡ªå·±å¯«ä¸€å€‹é©åˆåœ˜éšŠçš„ï¼Œåœ¨é€™è£¡æˆ‘ç”¨æˆ‘è‡ªå·±å¯«çš„ [`emoji-cz`](https://github.com/kevin940726/emoji-cz) `adapter` ä¾†åšç¤ºç¯„ï¼Œé€™æ˜¯ä¸€å€‹åŸºæ–¼ä»¥ä¸Šæˆ‘æ¨è–¦çš„å¤§åŸå‰‡ä¹‹ä¸‹åœ¨ subject å‰é¢åŠ ä¸Š type å°æ‡‰çš„ emoji çš„ `adapter`ã€‚

```sh
$ yarn global add emoji-cz
```

æ¥ä¸‹ä¾†æŒ‡å®šå°‡ `emoji-cz` ä½œç‚º `Commitizen` çš„ global `adapter`ã€‚

```sh
$ echo '{ "path": "emoji-cz" }' > ~/.czrc
```

å®Œæˆå¾Œå¾€å¾Œçš„ `commit` éƒ½ç”¨ `git cz` ä¾†å–ä»£åŸæœ¬çš„ `git commit` æŒ‡ä»¤ã€‚

```sh
$ git cz
? Select the type of change that you're committing: (Use arrow keys)
â¯ âœ¨  Feat:      A new feature
  ğŸ›  Fix:       A bug fix
  ğŸ“š  Docs:      Documentation only changes
  ğŸ¨  Style:     Changes that do not affect the meaning of the code
  ğŸ”¨  Refactor:  A code change that neither fixes a bug nor adds a feature
  ğŸš€  Perf:      A code change that improves performance
  ğŸš¨  Test:      Adding missing tests or correcting existing tests
```

ä»¥ `emoji-cz` ç‚ºä¾‹å°±æœƒè®“ä½ å¾é è¨­çš„æ¸…å–®ä¸­é¸æ“‡é€™æ¬¡ `commit` çš„ typeï¼Œä¹‹å¾Œå†è¼¸å…¥æ¨™é¡Œã€å…§æ–‡å’Œ issues å¾Œå°±æœƒè‡ªå‹•ç”¢ç”Ÿå°æ‡‰çš„ `commit message`ã€‚

> ğŸ“š Docs: update readme to show a simple demo

### Setup locally

å¦‚æœæœ‰éœ€æ±‚è¦åœ¨ä¸åŒçš„ project ä½¿ç”¨ä¸åŒçš„ `adapter`ï¼Œ`Commitizen` ä¹Ÿæœ‰æä¾›ç°¡å–®åœ°è¨­å®šæ–¹å¼ï¼Œåªè¦åœ¨å°ˆæ¡ˆçš„ `package.json` ä¸­åŠ å…¥ä»¥ä¸‹ï¼š

```json
"config": {
  "commitizen": {
    "path": "emoji-cz"
  }
}
```

åœ¨è©²å°ˆæ¡ˆç›®éŒ„åº•ä¸‹çš„ `git cz` ä¹Ÿæœƒå¥—ç”¨å°æ‡‰çš„ `adapter` äº†ã€‚

å®˜æ–¹æ–‡ä»¶ä¸­æä¾›äº†è¨±å¤šå‚‘å‡ºçš„ [`adapter`](https://github.com/commitizen/cz-cli#adapters) å¯ä¾›é¸æ“‡ï¼Œä½†ä½ ä¹Ÿå¯ä»¥é¸æ“‡è‡ªå·±å¯«ä¸€å€‹ `adapter` ä¾†ç¬¦åˆè‡ªå·±çš„éœ€æ±‚ï¼Œä»»æ„ fork ä¸€å€‹èˆ‡è‡ªå·±çš„æ¶æ§‹ç›¸ä¼¼çš„ `adapter` å¾Œæ‹¿ä¾†æ”¹å¯«å§ï¼Œé‚è¼¯éå¸¸çš„ç°¡å–®è€Œä¸”èƒ½å¤ è‡ªå®šç¾©çš„åœ°æ–¹ä¹Ÿå¾ˆè‡ªç”±ï¼Œæˆ‘é¼“å‹µæ¯å€‹äººéƒ½å¯ä»¥è©¦è©¦çœ‹ã€‚

### Adding alias

è—‰ç”±ä¸€äº› `alias` çš„æŠ€å·§å¯ä»¥å°‡æŒ‡ä»¤è¨­å®šçš„æ›´åŠ ç¬¦åˆå€‹äººéœ€æ±‚ï¼Œnpm script æ˜¯æœ€ç°¡å–®çš„æ–¹å¼ï¼Œä¾‹å¦‚å°‡ `commit` çš„æŒ‡ä»¤åŠ å…¥ `package.json` çš„ `scripts` ä¸­ï¼š

```json
"scripts": {
  "commit": "git cz"
}
```

æˆ–æ˜¯æ›´ç°¡å–®çš„ä½¿ç”¨ [`git alias`](https://git-scm.com/book/zh-tw/v1/Git-%E5%9F%BA%E7%A4%8E-%E6%8F%90%E7%A4%BA%E5%92%8C%E6%8A%80%E5%B7%A7#Git-å‘½ä»¤åˆ¥å) çš„åŠŸèƒ½ä¾†åšå…¨åŸŸè¨­å®šï¼š

```sh
$ git config --global alias.c cz
$ git c # equals to 'git cz'
```

å¦‚æœæƒ³è¦æ›´é€²ä¸€æ­¥é˜²æ­¢åœ˜éšŠä¸­çš„äººä¸å°å¿ƒ `commit` äº†éŒ¯èª¤çš„æ ¼å¼ï¼Œå¯ä»¥ä½¿ç”¨ git hook åƒæ˜¯ [`pre-commit`](https://github.com/observing/pre-commit) ä¾†åšæ›´é€²ä¸€æ­¥çš„æª¢æŸ¥ã€‚

## Summary

ç¶­è­·å¥½çš„ `commit` è¨Šæ¯äººäººæœ‰è²¬ï¼ä»¥ä¸Šçš„åŸå‰‡é›–ç„¶ä¸æ˜¯çµ•å°ï¼Œä½†éµå®ˆå¤šä¸€é»é»è¦å‰‡å»å¯ä»¥å¤§å¹…çš„å¢åŠ æ•´é«”è¨Šæ¯çš„å¯è®€æ€§ï¼Œå¸Œæœ›å¤§å®¶çœ‹äº†ä»¥å¾Œä¹Ÿå¯ä»¥åœ¨è‡ªå·±çš„å°ˆæ¡ˆæˆ–æ˜¯åœ˜éšŠä¸­å˜—è©¦å°å…¥é€™äº›ç³»çµ±ã€‚ç•¶ç„¶å¦‚æœå–œæ­¡æˆ‘çš„ [`emoji-cz`](https://github.com/kevin940726/emoji-cz) çš„é¢¨æ ¼ä¹Ÿä¸è¦åå—‡åœ°å¹«æˆ‘è·Ÿ [Commitizen](https://github.com/commitizen/cz-cli) é»å€‹ star åˆ†äº«çµ¦æ›´å¤šäººå“¦ï½

## Reference

- [How to Write a Git Commit Message - Chris Beams](https://chris.beams.io/posts/git-commit/)
- [AngularJS Git Commit Message Conventions - stephenparish](https://gist.github.com/stephenparish/9941e89d80e2bc58a153)
- [Commitizen](https://github.com/commitizen/cz-cli)
- [emoji-cz](https://github.com/kevin940726/emoji-cz)
